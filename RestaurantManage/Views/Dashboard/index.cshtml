@using RestaurantManage.DTOs
@using Microsoft.EntityFrameworkCore.Metadata.Internal
@{
    Layout = null;
    string mode = ViewBag.mode;
    double totalReveneu = 0;
    int totalFoods = 0;
    int totalCust = 0;
    List<RateReveneuDTO> reveneuDtos = new List<RateReveneuDTO>();
    List<TopFoodDTO> topFoods = new List<TopFoodDTO>();
    List<Account> accounts = new List<Account>();
    List<TableFood> tables = new List<TableFood>();
    List<Food> foods = new List<Food>();
    List<FoodCategory> foodCategories = new List<FoodCategory>();

    int countPage = 0;
    int page = 0;
    int count = 1;

    if (mode == "Dashboard")
    {
         totalReveneu = ViewBag.totalReveneu;
         totalFoods= ViewBag.totalFoods;
         totalCust = ViewBag.totalCust;
         reveneuDtos = ViewBag.reveneuDtos as List<RateReveneuDTO>;
         topFoods = ViewBag.topFoods as List<TopFoodDTO>;
    }else if (mode == "ManageAcc")
    {
        accounts = ViewBag.accounts as List<Account>;
        countPage = ViewBag.countPage;
        page = ViewBag.page;
    }else if (mode == "ManageTable")
    {
        tables = ViewBag.tables as List<TableFood>;
        countPage = ViewBag.countPage;
        page = ViewBag.page;
    }else if (mode == "ManageFood")
    {
        foods = ViewBag.foods as List<Food>;
        countPage = ViewBag.countPage;
        page = ViewBag.page;
    }else if (mode == "Food")
    {
        foodCategories = ViewBag.foodCategories as List<FoodCategory>;
    }
}
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Quản Lý Doanh Thu Bán Hàng</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
</head>
<body>
    <div class="sidebar" id="sidebar">
            <h2>Menu</h2>
            <ul>
                <li><a href="/Dashboard">Thống kê</a></li>
                <li><a href="/Dashboard?Mode=ManageAcc">Tài khoản</a></li>
                <li><a href="/Dashboard?Mode=ManageTable">Bàn ăn</a></li>
                <li><a href="/Dashboard?Mode=ManageFood">Món ăn</a></li>
                <li><a href="/Dashboard?Mode=ManageCategory">Danh mục</a></li>
                <li><a href="/Dashboard?Mode=ManageBill">Hóa đơn</a></li>
                <li style="margin-top: 200%;"><a href="@Url.Action("Logout", "Login")">Đăng xuất</a></li>
            </ul>
        </div>
<div class="main-content" id="main-content">
    @if (mode == "Dashboard")
    {
        <header>
                <h1>Dashboard Quản Lý Nhà Hàng</h1>
            </header>
            <main>
                <section class="stats">
                    <div class="stat">
                        <h3>Tổng Doanh Thu</h3>
                        <p id="total-revenue">0</p>
                    </div>
                    <div class="stat">
                        <h3>Số Món Ăn Bán Được</h3>
                        <p id="total-products">0</p>
                    </div>
                    <div class="stat">
                        <h3>Tổng Khách Hàng</h3>
                        <p id="new-customers">0</p>
                    </div>
                </section>
                <section class="charts">
                    <canvas id="revenue-chart"></canvas>
                </section>
                <section class="table">
                    <h2>Top 3 Món Ăn Bán Chạy</h2>
                    <table>
                        <thead>
                        <tr>
                            <th>Tên Món Ăn</th>
                            <th>Số Lượng Bán</th>
                            <th>Doanh Thu</th>
                        </tr>
                        </thead>
                        <tbody id="product-table-body">
                        <!-- Dữ liệu sẽ được thêm vào bằng JavaScript -->
                        </tbody>
                    </table>
                </section>
            </main>
    }else if (mode == "ManageAcc")
    {
    <div class="table-responsive">
        <div class="table-wrapper">
            <div class="table-title">
                <div class="row">
                    <div class="col-sm-5">
                        <h2>Account <b>Management</b></h2>
                    </div>
                    <div class="col-sm-7">
                        <a href="/Dashboard?Mode=Account" class="btn btn-secondary"><i class="material-icons">&#xE147;</i> <span>Add New Account</span></a>
                        @*<a href="#" class="btn btn-secondary"><i class="material-icons">&#xE24D;</i> <span>Export to Excel</span></a>*@						
                    </div>
                </div>
            </div>
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Tên đăng nhập</th>						
                        <th>Tên hiển thị</th>
                        <th>Mật khẩu</th>
                        <th>Chức vụ</th>
                        <th>Hành động</th>
                    </tr>
                </thead>
                <tbody>
                @foreach (var item in accounts)
                {
                    <tr>
                        <td>@count</td>
                        <td><a href="#">@item.UserName</a></td>
                        <td>@item.DisplayName</td>
                        <td>******</td>
                        <td>@(item.Type == 0 ? "Nhân viên" : "Quản lý")</td>
                        <td>
                            <a href="/Dashboard?mode=Account&username=@item.UserName" class="settings" title="Settings" data-toggle="tooltip"><i class="material-icons">&#xE8B8;</i></a>
                            <a href="@Url.Action("Remove", "Dashboard", new { id = item.UserName, mode = "account" })" class="delete" title="Delete" data-toggle="tooltip" onclick="return confirm('Bạn có chắc chắn muốn xóa tài khoản này không?');"><i class="material-icons">&#xE5C9;</i></a>
                        </td>
                    </tr>
                    count++;
                }
                </tbody>
            </table>
            <div class="clearfix">
                <ul class="pagination">
                    <li class="page-item @(page == 1 ? "disabled" : "")"><a href="/Dashboard?Mode=ManageAcc&page=@(page-1)" class="page-link">Trang trước</a></li>
                    
                    @for (int i = 1; i <= @countPage; i++)
                    {
                        <li class="page-item @(i == page ? "active" : "")"><a href="/Dashboard?Mode=ManageAcc&page=@i" class="page-link">@i</a></li>
                    }
                    <li class="page-item @(page == countPage ? "disabled" : "")"><a href="/Dashboard?Mode=ManageAcc&page=@(page+1)" class="page-link">Trang sau</a></li>
                </ul>
            </div>
        </div>
    </div>
    }else if (mode == "Account")
    {
        <form asp-action="AccountManage" asp-controller="Dashboard" method="post" class="form-horizontal">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">Thông tin tài khoản</h4>
                </div>
                <input name="check" value="@(ViewBag.account != null ? "1" : "")" type="text" class="form-control" hidden>
                <div class="panel-body">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Tên đăng nhập</label>
                        <div class="col-sm-10">
                            <input name="userName" value="@(ViewBag.account != null ? ViewBag.account.UserName : "")" type="text" class="form-control" readonly="@(ViewBag.account != null ? true : false)" required>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">Tên hiển thị</label>
                            <div class="col-sm-10">
                                <input name="displayName" value="@(ViewBag.account != null ? ViewBag.account.DisplayName : "")" type="text" class="form-control" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">Mật khẩu</label>
                            <div class="col-sm-10">
                                <input name="password" value="@(ViewBag.account != null ? ViewBag.account.PassWord : "")" type="password" class="form-control" minlength="6" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">Chức vụ</label>
                            <div class="col-sm-10">
                                <select name="accountType" class="form-control" required>
                                    @if (ViewBag.account != null && ViewBag.account.Type == 0)
                                    {
                                        <option value="0" selected>Nhân viên</option>
                                        <option value="1">Quản lý</option>
                                    }
                                    else if (ViewBag.account != null && ViewBag.account.Type == 1)
                                    {
                                        <option value="0">Nhân viên</option>
                                        <option value="1" selected>Quản lý</option>
                                    }
                                    else
                                    {
                                        <option value="0">Nhân viên</option>
                                        <option value="1">Quản lý</option>
                                    }
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                @if (ViewBag.error != "")
                {
                    <div class="col-sm-10">
                        <p style="color: red;">@ViewBag.error</p>
                    </div>
                }
                <div class="panel panel-default">
                    <div class="panel-body">
                        <div class="form-group">
                            <div class="col-sm-10 col-sm-offset-2">
                                @if (ViewBag.account != null)
                                {
                                    <button type="submit" class="btn btn-primary">Cập nhật</button>
                                }
                                else
                                {
                                    <button type="submit" class="btn btn-primary">Xác nhận</button>
                                }
                                <button type="reset" class="btn btn-default">Hủy</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
        </form>
    }else if (mode == "ManageTable")
     {
     <div class="table-responsive">
         <div class="table-wrapper">
             <div class="table-title">
                 <div class="row">
                     <div class="col-sm-5">
                         <h2>Table <b>Management</b></h2>
                     </div>
                     <div class="col-sm-7">
                         <a href="/Dashboard?Mode=Table" class="btn btn-secondary"><i class="material-icons">&#xE147;</i> <span>Add New Table</span></a>
                         @*<a href="#" class="btn btn-secondary"><i class="material-icons">&#xE24D;</i> <span>Export to Excel</span></a>*@						
                     </div>
                 </div>
             </div>
             <table class="table table-striped table-hover">
                 <thead>
                     <tr>
                         <th>#</th>
                         <th>Mã bàn</th>						
                         <th>Tên bàn</th>
                         <th>Tình trạng</th>
                         <th>Hành động</th>
                     </tr>
                 </thead>
                 <tbody>
                 @foreach (var item in tables)
                 {
                     <tr>
                         <td>@count</td>
                         <td><a href="#">@item.Id</a></td>
                         <td>@item.Name</td>
                         <td>@(item.Status == "0" ? "Trống" : "Hết chổ")</td>
                         <td>
                             <a href="/Dashboard?mode=Table&tableId=@item.Id" class="settings" title="Settings" data-toggle="tooltip"><i class="material-icons">&#xE8B8;</i></a>
                             <a href="@Url.Action("Remove", "Dashboard", new { id = item.Id, mode = "table" })" class="delete" title="Delete" data-toggle="tooltip" onclick="return confirm('Bạn có chắc chắn muốn xóa bàn này không?');"><i class="material-icons">&#xE5C9;</i></a>
                         </td>
                     </tr>
                     count++;
                 }
                 </tbody>
             </table>
             <div class="clearfix">
                 <ul class="pagination">
                     <li class="page-item @(page == 1 ? "disabled" : "")"><a href="/Dashboard?Mode=ManageTable&page=@(page-1)" class="page-link">Trang trước</a></li>
                     
                     @for (int i = 1; i <= @countPage; i++)
                     {
                         <li class="page-item @(i == page ? "active" : "")"><a href="/Dashboard?Mode=ManageTable&page=@i" class="page-link">@i</a></li>
                     }
                     <li class="page-item @(page == countPage ? "disabled" : "")"><a href="/Dashboard?Mode=ManageTable&page=@(page+1)" class="page-link">Trang sau</a></li>
                 </ul>
             </div>
         </div>
     </div>
     }else if (mode == "Table")
      {
          <form asp-action="TableManage" asp-controller="Dashboard" method="post" class="form-horizontal">
              <div class="panel panel-default">
                  <div class="panel-heading">
                      <h4 class="panel-title">Thông tin bàn</h4>
                  </div>
                  <input name="tableId" value="@(ViewBag.table != null ? ViewBag.table.Id : "")" type="text" class="form-control" hidden>
                  <div class="panel-body">
                      <div class="form-group">
                          <label class="col-sm-2 control-label">Tên bàn</label>
                          <div class="col-sm-10">
                              <input name="name" value="@(ViewBag.table != null ? ViewBag.table.Name : "")" type="text" class="form-control" readonly="@(ViewBag.table != null ? true : false)" required>
                          </div>
                          <div class="form-group">
                              <label class="col-sm-2 control-label">Tình trạng</label>
                              <div class="col-sm-10">
                                  <select name="status" class="form-control" required>
                                      @if (ViewBag.table != null && ViewBag.table.Status == "0")
                                      {
                                          <option value="0" selected>Trống</option>
                                          <option value="1">Hết chổ</option>
                                      }
                                      else if (ViewBag.table != null && ViewBag.table.Status == "1")
                                      {
                                          <option value="0">Trống</option>
                                          <option value="1" selected>Hết chổ</option>
                                      }
                                      else
                                      {
                                          <option value="0">Trống</option>
                                          <option value="1">Hết chổ</option>
                                      }
                                  </select>
                              </div>
                          </div>
                      </div>
                  </div>
                  @if (ViewBag.error != "")
                  {
                      <div class="col-sm-10">
                          <p style="color: red;">@ViewBag.error</p>
                      </div>
                  }
                  <div class="panel panel-default">
                      <div class="panel-body">
                          <div class="form-group">
                              <div class="col-sm-10 col-sm-offset-2">
                                  @if (ViewBag.table != null)
                                  {
                                      <button type="submit" class="btn btn-primary">Cập nhật</button>
                                  }
                                  else
                                  {
                                      <button type="submit" class="btn btn-primary">Xác nhận</button>
                                  }
                                  <button type="reset" class="btn btn-default">Hủy</button>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
              
          </form>
      }else if (mode == "ManageFood")
        {
        <div class="table-responsive">
            <div class="table-wrapper">
                <div class="table-title">
                    <div class="row">
                        <div class="col-sm-5">
                            <h2>Food <b>Management</b></h2>
                        </div>
                        <div class="col-sm-7">
                            <a href="/Dashboard?Mode=Food" class="btn btn-secondary"><i class="material-icons">&#xE147;</i> <span>Add New Food</span></a>
                            @*<a href="#" class="btn btn-secondary"><i class="material-icons">&#xE24D;</i> <span>Export to Excel</span></a>*@						
                        </div>
                    </div>
                </div>
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Mã món ăn</th>						
                            <th>Tên món ăn</th>
                            <th>Danh mục</th>
                            <th>Giá tiền</th>
                            <th>Hành động</th>
                        </tr>
                    </thead>
                    <tbody>
                    @foreach (var item in foods)
                    {
                        <tr>
                            <td>@count</td>
                            <td><a href="#">@item.Id</a></td>
                            <td>@item.Name</td>
                            <td>@item.IdCategoryNavigation.Name</td>
                            <td>@item.Price đ</td>
                            <td>
                                <a href="/Dashboard?mode=Food&foodId=@item.Id" class="settings" title="Settings" data-toggle="tooltip"><i class="material-icons">&#xE8B8;</i></a>
                                <a href="@Url.Action("Remove", "Dashboard", new { id = item.Id, mode = "food" })" class="delete" title="Delete" data-toggle="tooltip" onclick="return confirm('Bạn có chắc chắn muốn xóa món ăn này không?');"><i class="material-icons">&#xE5C9;</i></a>
                            </td>
                        </tr>
                        count++;
                    }
                    </tbody>
                </table>
                <div class="clearfix">
                    <ul class="pagination">
                        <li class="page-item @(page == 1 ? "disabled" : "")"><a href="/Dashboard?Mode=ManageFood&page=@(page-1)" class="page-link">Trang trước</a></li>
                        
                        @for (int i = 1; i <= @countPage; i++)
                        {
                            <li class="page-item @(i == page ? "active" : "")"><a href="/Dashboard?Mode=ManageFood&page=@i" class="page-link">@i</a></li>
                        }
                        <li class="page-item @(page == countPage ? "disabled" : "")"><a href="/Dashboard?Mode=ManageFood&page=@(page+1)" class="page-link">Trang sau</a></li>
                    </ul>
                </div>
            </div>
        </div>
        }else if (mode == "Food")
         {
             <form asp-action="FoodManage" asp-controller="Dashboard" method="post" class="form-horizontal">
                 <div class="panel panel-default">
                     <div class="panel-heading">
                         <h4 class="panel-title">Thông tin món ăn</h4>
                     </div>
                     <input name="foodId" value="@(ViewBag.food != null ? ViewBag.food.Id : "")" type="text" class="form-control" hidden>
                     <div class="panel-body">
                         <div class="form-group">
                             <label class="col-sm-2 control-label">Tên món ăn</label>
                             <div class="col-sm-10">
                                 <input name="foodName" value="@(ViewBag.food != null ? ViewBag.food.Name : "")" type="text" class="form-control" readonly="@(ViewBag.food != null ? true : false)" required>
                             </div>
                             <div class="form-group">
                                 <label class="col-sm-2 control-label">Danh mục</label>
                                 <div class="col-sm-10">
                                     <select name="categoryId" class="form-control" required>
                                         @foreach (var item in foodCategories)
                                         {
                                             if (ViewBag.food != null && ViewBag.food.IdCategory == item.Id)
                                             {
                                                 <option value="@item.Id" selected>@item.Name</option>
                                             }
                                             else
                                             {
                                                 <option value="@item.Id">@item.Name</option>
                                             }
                                         }
                                     </select>

                                 </div>
                             </div>
                             <div class="form-group">
                                  <label class="col-sm-2 control-label">Giá tiền</label>
                                  <div class="col-sm-10">
                                      <input name="price" value="@(ViewBag.food != null ? ViewBag.food.Price : 0)" type="number" class="form-control"  required>
                                  </div>
                              </div>
                         </div>
                     </div>
                     @if (ViewBag.error != "")
                     {
                         <div class="col-sm-10">
                             <p style="color: red;">@ViewBag.error</p>
                         </div>
                     }
                     <div class="panel panel-default">
                         <div class="panel-body">
                             <div class="form-group">
                                 <div class="col-sm-10 col-sm-offset-2">
                                     @if (ViewBag.food != null)
                                     {
                                         <button type="submit" class="btn btn-primary">Cập nhật</button>
                                     }
                                     else
                                     {
                                         <button type="submit" class="btn btn-primary">Xác nhận</button>
                                     }
                                     <button type="reset" class="btn btn-default">Hủy</button>
                                 </div>
                             </div>
                         </div>
                     </div>
                 </div>
                 
             </form>
         }
</div>
    <script src="script.js"></script>
</body>
</html>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f4f9;
        display: flex;
    }
    
    .sidebar {
        width: 250px;
        background-color: #333;
        color: white;
        height: 100vh;
        position: fixed;
        top: 0;
        left: 0;
        padding-top: 2em;
    }
    
    .sidebar h2 {
        text-align: center;
    }
    
    .sidebar ul {
        list-style: none;
        padding: 0;
    }
    
    .sidebar ul li {
        padding: 1em;
        text-align: center;
    }
    
    .sidebar ul li a {
        color: white;
        text-decoration: none;
    }
    
    .main-content {
        margin-left: 250px;
        padding: 1em;
        width: calc(100% - 250px);
    }
    
    header {
        background-color: #299be4;
        color: white;
        padding: 1em;
        text-align: center;
    }
    
    .stats {
        display: flex;
        justify-content: space-around;
        margin: 2em 0;
    }
    
    .stat {
        background-color: #fff;
        padding: 1em;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        text-align: center;
        width: 30%;
    }
    
    .stat h3 {
        margin-bottom: 0.5em;
    }
    
    .charts {
        margin: 2em 0;
    }
    
    .table {
        margin: 2em 0;
        background-color: #fff;
        padding: 1em;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    table {
        width: 100%;
        border-collapse: collapse;
    }
    
    th, td {
        padding: 0.5em;
        text-align: left;
        border-bottom: 1px solid #ddd;
    }
    
    .table-responsive {
        margin: 30px 0;
    }
    .table-wrapper {
        min-width: 1000px;
        background: #fff;
        padding: 20px 25px;
        border-radius: 3px;
        box-shadow: 0 1px 1px rgba(0,0,0,.05);
    }
    .table-title {
        padding-bottom: 15px;
        background: #299be4;
        color: #fff;
        padding: 16px 30px;
        margin: -20px -25px 10px;
        border-radius: 3px 3px 0 0;
    }
    .table-title h2 {
        margin: 5px 0 0;
        font-size: 24px;
    }
    .table-title .btn {
        color: #566787;
        float: right;
        font-size: 13px;
        background: #fff;
        border: none;
        min-width: 50px;
        border-radius: 2px;
        border: none;
        outline: none !important;
        margin-left: 10px;
    }
    .table-title .btn:hover, .table-title .btn:focus {
        color: #566787;
        background: #f2f2f2;
    }
    .table-title .btn i {
        float: left;
        font-size: 21px;
        margin-right: 5px;
    }
    .table-title .btn span {
        float: left;
        margin-top: 2px;
    }
    table.table tr th, table.table tr td {
        border-color: #e9e9e9;
        padding: 12px 7px;
        vertical-align: middle;
    }
    table.table tr th:first-child {
        width: 60px;
    }
    table.table tr th:last-child {
        width: 100px;
    }
    table.table-striped tbody tr:nth-of-type(odd) {
        background-color: #fcfcfc;
    }
    table.table-striped.table-hover tbody tr:hover {
        background: #f5f5f5;
    }
    table.table th i {
        font-size: 13px;
        margin: 0 5px;
        cursor: pointer;
    }	
    table.table td:last-child i {
        opacity: 0.9;
        font-size: 22px;
        margin: 0 5px;
    }
    table.table td a {
        font-weight: bold;
        color: #566787;
        display: inline-block;
        text-decoration: none;
    }
    table.table td a:hover {
        color: #2196F3;
    }
    table.table td a.settings {
        color: #2196F3;
    }
    table.table td a.delete {
        color: #F44336;
    }
    table.table td i {
        font-size: 19px;
    }
    table.table .avatar {
        border-radius: 50%;
        vertical-align: middle;
        margin-right: 10px;
    }
    .status {
        font-size: 30px;
        margin: 2px 2px 0 0;
        display: inline-block;
        vertical-align: middle;
        line-height: 10px;
    }
    .text-success {
        color: #10c469;
    }
    .text-info {
        color: #62c9e8;
    }
    .text-warning {
        color: #FFC107;
    }
    .text-danger {
        color: #ff5b5b;
    }
    .pagination {
        float: right;
        margin: 0 0 5px;
    }
    .pagination li a {
        border: none;
        font-size: 13px;
        min-width: 30px;
        min-height: 30px;
        color: #999;
        margin: 0 2px;
        line-height: 30px;
        border-radius: 2px !important;
        text-align: center;
        padding: 0 6px;
    }
    .pagination li a:hover {
        color: #666;
    }	
    .pagination li.active a, .pagination li.active a.page-link {
        background: #03A9F4;
    }
    .pagination li.active a:hover {        
        background: #0397d6;
    }
    .pagination li.disabled i {
        color: #ccc;
    }
    .pagination li i {
        font-size: 16px;
        padding-top: 6px
    }
    .hint-text {
        float: left;
        margin-top: 10px;
        font-size: 13px;
    }

</style>
<script>
// Dữ liệu mẫu
const data = {
    totalRevenue: @totalReveneu,
    totalProducts: @totalFoods,
    newCustomers: @totalCust,
    monthlyRevenue: @Html.Raw(Json.Serialize(reveneuDtos.Select(r => r.Reveneu))),
    bestSellingProducts: [
            @foreach(var item in topFoods) {
                @:{ name: "@item.FoodName", quantity: @item.Quantity, revenue: @item.Reveneu },
            }
        ]
};

// Cập nhật các thẻ thống kê
document.getElementById('total-revenue').textContent = `${data.totalRevenue.toLocaleString()} VND`;
document.getElementById('total-products').textContent = data.totalProducts;
document.getElementById('new-customers').textContent = data.newCustomers;

// Tạo biểu đồ doanh thu theo tháng
const ctx = document.getElementById('revenue-chart').getContext('2d');
const revenueChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: ['Tháng 1', 'Tháng 2', 'Tháng 3', 'Tháng 4', 'Tháng 5', 'Tháng 6', 'Tháng 7', 'Tháng 8', 'Tháng 9', 'Tháng 10', 'Tháng 11', 'Tháng 12'],
        datasets: [{
            label: 'Doanh thu',
            data: data.monthlyRevenue,
            borderColor: 'rgba(75, 192, 192, 1)',
            backgroundColor: 'rgba(75, 192, 192, 0.2)',
            fill: true
        }]
    },
    options: {
        responsive: true,
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});

// Hiển thị các sản phẩm bán chạy
const productTableBody = document.getElementById('product-table-body');
data.bestSellingProducts.forEach(product => {
    const row = document.createElement('tr');
    row.innerHTML = `<td>${product.name}</td><td>${product.quantity}</td><td>${product.revenue.toLocaleString()} VND</td>`;
    productTableBody.appendChild(row);
});

$(document).ready(function(){
	$('[data-toggle="tooltip"]').tooltip();
});

</script>