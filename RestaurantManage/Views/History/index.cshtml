@using RestaurantManage.DTOs

@{
	List<Bill> bills = ViewBag.bills as List<Bill>;
}

@*
<div class="alert alert-danger" role="alert"><strong>Info!</strong> Add row and Delete row are working. Edit row displays modal with row cells information.</div>
*@
<a class="btn btn-success" style="float:left;margin-right:20px;" href="" target="_blank">Lịch sử đặt bàn</a>
<table id="example" class="table table-striped table-bordered" cellspacing="0" width="100%">
	<thead>
		<tr>
			<th>Mã đơn</th>
			<th>Ngày đặt</th>
			<th>Ngày thanh toán</th>
			<th>Tên bàn</th>
			<th>Trạng thái</th>
			<th>Tổng tiền</th>
		</tr>
	</thead>
<tbody>
@foreach (var item in @bills)
{
	<tr>
		<td>@item.Id</td>
		<td>@item.DateCheckIn</td>
		<td>@item.DateCheckOut</td>
		<td>@item.IdTableNavigation.Name</td>
		<td>
            @(item.Status == 1 ? "Đã thanh toán" : "Chưa thanh toán")
        </td>
		<td>@item.TotalPrice</td>
		<td>
			<button style="margin-right: 16px;" type="button" class="btn btn-primary btn-sm">Chỉnh sửa</button>
			<button type="button" class="btn btn-danger btn-sm">Hủy</button>
		</td>
	</tr>
}
</tbody>
</table>

<!-- Modal -->
<div id="myModal" class="modal fade" role="dialog">
	<div class="modal-dialog">

		<!-- Modal content-->
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
				<h4 class="modal-title">Row information </h4>
			</div>
			<div class="modal-body">
        
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			</div>
		</div>

	</div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Xử lý khi click vào nút "Hủy"
        var btnDangerList = document.querySelectorAll('.btn-danger');
        btnDangerList.forEach(function(btnDanger) {
            btnDanger.addEventListener('click', function() {
                var row = this.closest('tr');
                var id = row.querySelector('td:first-child').textContent;

                // Hiển thị hộp thoại xác nhận
                if (confirm('Bạn có chắc chắn muốn hủy đơn có mã ' + id + ' không?')) {
                    // Thực hiện hành động hủy ở đây
                    // Ví dụ: gọi hàm xử lý hủy bằng AJAX
                    // Xóa dòng này (row) sau khi xử lý hủy thành công
                    row.remove();
                }
            });
        });
	});
    </script>	
